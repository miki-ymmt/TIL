

8/2ï¼’

ï¼˜h (TTL 12ï¼”ï¼‘h)

 ã€å®Ÿæ–½å†…å®¹ã€‘
- ã‚¢ãƒ—ãƒªé–‹ç™º
- ãƒ˜ãƒƒãƒ€ãƒ¼ä¿®æ­£
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼å°å…¥



***

ã€å­¦ç¿’ã‚’é€šã—ã¦ã€‘
**[ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼]**
turboã¨çµ„ã¿åˆã‚ã›ã‚‹ã®ã‚€ãšã€‚ã€‚ã€‚ã€‚ã€‚ğŸ˜‚
å…ˆè¼©ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ
turboä½¿ã£ã¦ã‚‹å ´åˆã¯ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒšã§ã¯å®Ÿè£…ã§ããªã‹ã£ãŸ....
https://daisyui.com/components/loading/
ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒfetchãªã®ã‹getãªã®ã‹ã§ã‚‚é•ã†ã‹ã‚‚ã—ã‚Œãªã„ã€‚


çµå±€IDå±æ€§é–“é•ãˆã¦ã¾ã—ãŸã€‚ã¨ã€dockerå†èµ·å‹•ã—ã¾ã—ãŸã€‚
- stimulusã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ä½œæˆ
app/javascript/controllers/spiner_controller.js
```
import { Controller } from "@hotwired/stimulus"

export default class extends Controller {
  static targets = ["spinner", "submitButton"]

  connect() {
    this.element.addEventListener("turbo:submit-start", this.showSpinner.bind(this))
    this.element.addEventListener("turbo:submit-end", this.hideSpinner.bind(this))
  }

  disconnect() {
    this.element.removeEventListener("turbo:submit-start", this.showSpinner.bind(this))
    this.element.removeEventListener("turbo:submit-end", this.hideSpinner.bind(this))
  }

  showSpinner() {
    this.spinnerTarget.classList.remove('hidden')
    this.submitButtonTarget.disabled = true
  }

  hideSpinner() {
    this.spinnerTarget.classList.add('hidden')
    this.submitButtonTarget.disabled = false
  }
}
```

- formé€ä¿¡æ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ã•ã›ã‚‹ã€€scriptã‚¿ã‚°ã®ä½œæˆãŒå¿…è¦
- Stimulusã§ã¯ã€1ã¤ã®HTMLè¦ç´ ã«å¯¾ã—ã¦è¤‡æ•°ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- form-resetã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼(ãƒ•ã‚©ãƒ¼ãƒ ã‚¯ãƒªã‚¢ã«ã—ãŸä»¥å‰ã®å®Ÿè£…)ã¯ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡å¾Œã«ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹æ©Ÿèƒ½
- spinnerã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡é–‹å§‹æ™‚ã«ã‚¹ãƒ”ãƒŠãƒ¼ã‚’è¡¨ç¤ºã—ã€é€ä¿¡å®Œäº†æ™‚ã«éè¡¨ç¤ºã«ã™ã‚‹æ©Ÿèƒ½

è¤‡æ•°ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã€ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã‚Œã‚‹
```
<%= form_with(model: @chatbot, url: chatbots_answer_path, data: { controller: "form-reset loading-spinner", action: "turbo:submit-end->form-reset#reset turbo:submit-start->loading-spinner#show turbo:submit-end->loading-spinner#hide", turbo_frame: "chatbot-form" }) do |f| %>
```
- application.htmlã®bodyå†…ã«ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¼‰
```
<body class="bg-icicle text-gray-700 font-zen relative">

  <div id="spinner-container" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50" data-loading-spinner-target="spinner">
    <span class="loading loading-spinner loading-lg text-primary"></span>
  </div>

  <div class="relative z-10">
    <% if logged_in? %>
      <%= render 'shared/header' %>
    <% else %>
      <%= render 'shared/before_login_header' %>
    <% end %>
    <main class="flex-grow">
    <%= render 'layouts/flash_messages' %>
    <%= yield %>
    </main>
    <%= render 'shared/footer' %>
    <%= javascript_include_tag 'lightbox-plus-jquery.min' %>
  </div>

  <script>
  document.addEventListener("turbo:submit-start", function() {
      document.getElementById("spinner-container").classList.remove("hidden");
  });

  document.addEventListener("turbo:submit-end", function() {
      document.getElementById("spinner-container").classList.add("hidden");
  });
  </script>
  </body>
```


[![Image from Gyazo](https://i.gyazo.com/4b450210c79644f61dbebfd715f3e184.gif)](https://gyazo.com/4b450210c79644f61dbebfd715f3e184)


æ˜¨æ—¥ä»Šæ—¥ã¨ã‚‚ã†ä½•10æ™‚é–“ã‚„ã£ã¦ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ã§ã™ãŒã€ç¶ºéº—ã«æ›¸ãä½™è£•ãŒãªã‹ãªã‹ãªã„ã®ã§ã€
å‚™å¿˜éŒ²ã§ã¡ã‚‡ã“ã¡ã‚‡ã“æ›¸ã„ã¦ã„ãã¾ã™ã­ã€œ
ãƒ•ãƒ©ã‚¤ãƒˆã‚³ãƒ©ãƒ ã¯å®Œæˆã—ã¾ã—ãŸâœˆï¸è±†çŸ¥è­˜çš„ãªãƒšãƒ¼ã‚¸ã§ã™ã€‚
PRã—ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãŸã‚‰ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã‚„ã£ã¨ç€æ‰‹ã§ãã‚‹ãœï¼
action cableä½¿ã†botã®å®Ÿè£…ã¯æœ¬ãƒªãƒªå¾Œã«æŒ‘æˆ¦ã—ãŸã„ï¼
ã‚ã¨RUNTEQç¥­ã‚®ãƒªã‚®ãƒªå‡ºã›ãã†ã ã—é ‘å¼µã‚‹ğŸ”¥

[![Image from Gyazo](https://i.gyazo.com/b612ee24d93044d377710b939781655c.png)](https://gyazo.com/b612ee24d93044d377710b939781655c)
***


ã€æ˜æ—¥ã®To Doã€‘
- ãƒ›ãƒ¼ãƒ ç”»é¢ä¿®æ­£
- ãƒ˜ãƒƒãƒ€ãƒ¼ä¿®æ­£


ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ï¼ï¼ï¼
